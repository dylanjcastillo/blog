<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dylan Castillo">
<meta name="dcterms.date" content="2020-04-16">
<meta name="description" content="We will set up a Python script that reads data from Google Sheets, generates a static site using a predefined template, and deploys it to an S3 bucket.">

<title>Use Google Sheets, S3, and Python to Build a Website Quickly – Dylan Castillo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&amp;display=swap" rel="stylesheet">
<script src="https://cdn.usefathom.com/script.js" data-site="ZJFQREIA" defer=""></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dylanjcastillo"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/dylanjcastillo/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/dylanjcastillo"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#requirements" id="toc-requirements" class="nav-link active" data-scroll-target="#requirements">Requirements</a></li>
  <li><a href="#code-and-jinja-template" id="toc-code-and-jinja-template" class="nav-link" data-scroll-target="#code-and-jinja-template">Code and Jinja Template</a></li>
  <li><a href="#using-the-google-sheets-api" id="toc-using-the-google-sheets-api" class="nav-link" data-scroll-target="#using-the-google-sheets-api">Using the Google Sheets API</a></li>
  <li><a href="#setting-up-an-s3-bucket-and-aws-related-configurations" id="toc-setting-up-an-s3-bucket-and-aws-related-configurations" class="nav-link" data-scroll-target="#setting-up-an-s3-bucket-and-aws-related-configurations">Setting up an S3 bucket and AWS-related configurations</a></li>
  <li><a href="#build-and-deploy-your-site" id="toc-build-and-deploy-your-site" class="nav-link" data-scroll-target="#build-and-deploy-your-site">Build and Deploy Your Site</a></li>
  <li><a href="#closing-words" id="toc-closing-words" class="nav-link" data-scroll-target="#closing-words">Closing Words</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Use Google Sheets, S3, and Python to Build a Website Quickly</h1>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">web</div>
    <div class="quarto-category">productivity</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://dylancastillo.co">Dylan Castillo</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://iwanalabs.com">
            Iwana Labs
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 16, 2020</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">August 11, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<p>A few days ago, I was looking for courses that were free or discounted due to the COVID-19. I thought that others might be doing the same, so I decided to compile some resources and publish them online.</p>
<p>I started compiling the courses using a Google Sheet and was planning on sharing it after I had enough resources. However, something was bothering me. Opening sheets on a mobile suck and most people use their phones for browsing the internet. I thought I could do better.</p>
<p>The thing is that I have little experience in web development. Also, I didn’t want to dedicate more than a few hour on developing and launching the site. So I decided to build something quickly.</p>
<p>Here are the requirements I set for building the site quickly and the approach I took to meet them:</p>
<p><strong>Product Requirements:</strong></p>
<ol type="1">
<li>The site should load fast and look good on mobiles (or at least better than a Google Sheet)</li>
<li>I need to be able to add or remove resources fast and without much hassle. Keep in mind that I may want to add bit more interactivity from the client side in the future.</li>
<li>Use Python as much as possible (and as little as possible of HTML/CSS/JS)</li>
<li>It should take me only a few hours to develop and launch</li>
<li>Maintenance costs should be <em>very very</em> close to zero 😛</li>
</ol>
<p><strong>Approach:</strong></p>
<ol type="1">
<li>Used of Bootstrap (only CSS, excluded JS components)</li>
<li>Managed content using Google Sheets. I used the Google Sheets API for getting content programmatically into the site. It’s easy to make a web API from a Google Sheet if needed.</li>
<li>Generated the site using from a basic HTML/CSS template using Jinja2</li>
<li>Hosted the site on an AWS S3 bucket + Cloudfront (for SSL certificate). Bought the domain using Route 53</li>
<li>The use that I’m doing of the AWS services fall under the Free Tier. I don’t foresee that this will change anytime soon. So far, I’ve only invested ~15€ on the site</li>
</ol>
<p>After a couple of hours, I launched <a href="https://stayhomeandlearn.org/">stayhomeandlearn.org</a>.</p>
<p>The rest of this article is <strong>a tutorial on how to build a static site using Google Sheets, AWS, and Python</strong>.</p>
<hr>
<p>For this tutorial, <strong>we will set up a script that reads data from Google Sheets, generates a static site using a predefined template, and deploys it to an S3 bucket.</strong> This article is meant for programmers with little knowledge of web development that want to get something running quickly.</p>
<p>There are five sections in the tutorial: Requirements, Review Code and Jinja Template, Using the Google Sheets API, and Build and Deploy Your Site.</p>
<section id="requirements" class="level2">
<h2 class="anchored" data-anchor-id="requirements">Requirements</h2>
<p>These you’ll need to set up or review on your own. I added some links for that purpose.</p>
<ul>
<li><a href="https://www.python.org/downloads/">Python &gt;= 3.7</a></li>
<li><a href="https://myaccount.google.com/">Google account</a></li>
<li><a href="https://cloud.google.com/">Google Cloud Platform (GCP) account</a></li>
<li><a href="https://aws.amazon.com/free/">Amazon AWS account</a></li>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html">AWS CLI</a> (You can <a href="https://formulae.brew.sh/formula/awscli">use brew if you have a Mac</a>)</li>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration">A profile configured in the AWS CLI</a></li>
<li>A bit of <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Getting_started">HTML</a> and <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/First_steps/Getting_started">CSS</a></li>
</ul>
</section>
<section id="code-and-jinja-template" class="level2">
<h2 class="anchored" data-anchor-id="code-and-jinja-template">Code and Jinja Template</h2>
<p>First, create a directory called <code>my_pokemon_stats</code> and open a terminal from there. Then, create a virtual environment and install the required packages as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">python3</span> <span class="at">-m</span> venv venv</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="bu">source</span> venv/bin/activate</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="ex">pip3</span> install boto3 gspread jinja2 oauth2client</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Create virtual environment and install required libraries</p>
<p>Next, download and save these two files there: <a href="https://gist.github.com/dylanjcastillo/61018bf4474d388e2936a84368d40d07">template.html</a> and <a href="https://gist.github.com/dylanjcastillo/fbbdcb83694c2334714866340442ce18">site_builder.py</a>. These are the building blocks for generating the site.</p>
<p><code>template.html</code> is the Jinja template we will use for building the site. It’s an HTML-like file where you can add logic that will be processed in Python and generate the definitive site. This file looks as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">"en"</span><span class="dt">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="dt">&lt;</span><span class="kw">meta</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="ot">      name</span><span class="op">=</span><span class="st">"viewport"</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="ot">      content</span><span class="op">=</span><span class="st">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="ot">    </span><span class="dt">/&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> http-equiv</span><span class="op">=</span><span class="st">"X-UA-Compatible"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"ie=edge"</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="dt">&lt;</span><span class="kw">link</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="ot">      href</span><span class="op">=</span><span class="st">"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="ot">      rel</span><span class="op">=</span><span class="st">"stylesheet"</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="ot">      integrity</span><span class="op">=</span><span class="st">"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="ot">      crossorigin</span><span class="op">=</span><span class="st">"anonymous"</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="ot">    </span><span class="dt">/&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>My Pokemon Stats<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="dt">&lt;</span><span class="kw">header</span><span class="ot"> id</span><span class="op">=</span><span class="st">"header"</span><span class="dt">&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"container text-center"</span><span class="dt">&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>        <span class="dt">&lt;</span><span class="kw">h1</span><span class="ot"> class</span><span class="op">=</span><span class="st">"pt-5 pb-1 font-weight-bold"</span><span class="dt">&gt;</span>My Pokemon Stats<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>        <span class="dt">&lt;</span><span class="kw">hr</span><span class="ot"> </span><span class="dt">/&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="ot"> class</span><span class="op">=</span><span class="st">"pt-2"</span><span class="dt">&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>          This is a site I use to store the stats of all my Pokemon.</span>
<span id="cb2-25"><a href="#cb2-25"></a>        <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26"></a>      <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>    <span class="dt">&lt;/</span><span class="kw">header</span><span class="dt">&gt;</span></span>
<span id="cb2-28"><a href="#cb2-28"></a></span>
<span id="cb2-29"><a href="#cb2-29"></a>    <span class="dt">&lt;</span><span class="kw">section</span><span class="ot"> id</span><span class="op">=</span><span class="st">"pokemon_table"</span><span class="dt">&gt;</span></span>
<span id="cb2-30"><a href="#cb2-30"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"container py-4"</span><span class="dt">&gt;</span></span>
<span id="cb2-31"><a href="#cb2-31"></a>        <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"table-responsive"</span><span class="dt">&gt;</span></span>
<span id="cb2-32"><a href="#cb2-32"></a>          <span class="dt">&lt;</span><span class="kw">table</span><span class="ot"> class</span><span class="op">=</span><span class="st">"table table-hover"</span><span class="dt">&gt;</span></span>
<span id="cb2-33"><a href="#cb2-33"></a>            <span class="dt">&lt;</span><span class="kw">thead</span><span class="ot"> class</span><span class="op">=</span><span class="st">"thead-dark"</span><span class="dt">&gt;</span></span>
<span id="cb2-34"><a href="#cb2-34"></a>              <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb2-35"><a href="#cb2-35"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Name<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-36"><a href="#cb2-36"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Type 1<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-37"><a href="#cb2-37"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Type 2<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-38"><a href="#cb2-38"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Total<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-39"><a href="#cb2-39"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>HP<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-40"><a href="#cb2-40"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Attack<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-41"><a href="#cb2-41"></a>                <span class="dt">&lt;</span><span class="kw">th</span><span class="ot"> scope</span><span class="op">=</span><span class="st">"col"</span><span class="dt">&gt;</span>Defense<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb2-42"><a href="#cb2-42"></a>              <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb2-43"><a href="#cb2-43"></a>            <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb2-44"><a href="#cb2-44"></a>            <span class="dt">&lt;</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb2-45"><a href="#cb2-45"></a>              {% for row in data %}</span>
<span id="cb2-46"><a href="#cb2-46"></a>              <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb2-47"><a href="#cb2-47"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Name"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-48"><a href="#cb2-48"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Type 1"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-49"><a href="#cb2-49"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Type 2"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-50"><a href="#cb2-50"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Total"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-51"><a href="#cb2-51"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["HP"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-52"><a href="#cb2-52"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Attack"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-53"><a href="#cb2-53"></a>                <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ row["Defense"] }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb2-54"><a href="#cb2-54"></a>              <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb2-55"><a href="#cb2-55"></a>              {% endfor %}</span>
<span id="cb2-56"><a href="#cb2-56"></a>            <span class="dt">&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb2-57"><a href="#cb2-57"></a>          <span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb2-58"><a href="#cb2-58"></a>        <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb2-59"><a href="#cb2-59"></a>      <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb2-60"><a href="#cb2-60"></a>    <span class="dt">&lt;/</span><span class="kw">section</span><span class="dt">&gt;</span></span>
<span id="cb2-61"><a href="#cb2-61"></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-62"><a href="#cb2-62"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s break it down:</p>
<ul>
<li>You can safely ignore most of what’s inside the <code>&lt;head&gt;</code> tag. It’s standard HTML5 code that you’ll see in most pages. However, there are just two interesting tags that we’ll take a closer a look at: <code>&lt;link&gt;</code> and <code>&lt;title&gt;</code>.</li>
<li>In this case, the <code>&lt;link&gt;</code> tag is used to import the <a href="https://getbootstrap.com/">Bootstrap</a> component library. We &nbsp;will use it to define simple styles for the different sections of the page and make it look good without much effort. <code>&lt;title&gt;</code> defines the title of the page (what you see in the browser’s tab) and it is useful for SEO and social media sharing.</li>
<li>Next, there’s the <code>&lt;header&gt;</code> section inside the <code>&lt;body&gt;</code> tag. This is where we define the text that will appear in the page. It will look like the image below. I used standard styling from Bootstrap to center the text and added a bit of padding.</li>
</ul>
<p><a href="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-5.png" class="img-fluid"></a></p>
<p>My Pokemon stats header</p>
<ul>
<li>Finally, we have the <code>&lt;section id="pokemon_table"&gt;</code>. The <code>&lt;div&gt;</code> and <code>&lt;table&gt;</code> tags provide some basic styling for building a table. Next, we define the header of the table inside the <code>&lt;thead&gt;</code> tags. Inside the <code>&lt;tbody&gt;</code> tag is where Jinja does its magic</li>
<li>The <code>{% for row in data %}</code> is a loop that goes through each row of the Pokemon’s data. In each of the <code>&lt;td&gt;{{ row["..."] }}&lt;/td&gt;</code> we get the information per row from field (e.g.&nbsp;Name, Type 1, Type 2). This generates something that will look as follows:</li>
</ul>
<p><a href="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-4.png" class="img-fluid"></a></p>
<p>Table with Pokemon stats</p>
<p>Next, we have the <code>site_builder.py</code> file. This script downloads the Pokemon’s data from Google Sheets, processes the data and the <code>template.html</code> file, and then uploads the resulting file to an S3 bucket.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="im">import</span> csv</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="im">import</span> boto3</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="im">import</span> gspread</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="im">import</span> jinja2</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="im">from</span> oauth2client.service_account <span class="im">import</span> ServiceAccountCredentials</span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a>AWS_PROFILE <span class="op">=</span> <span class="st">"INSERT-AWS-PROFILE-HERE"</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>BUCKET <span class="op">=</span> <span class="st">"INSERT-BUCKET-NAME-HERE"</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>WORKBOOK <span class="op">=</span> <span class="st">"INSERT-WORKBOOK-NAME-HERE"</span></span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="kw">def</span> download_data():</span>
<span id="cb3-14"><a href="#cb3-14"></a>    <span class="co">"""Download data using the Google Sheets API"""</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>    scope <span class="op">=</span> [</span>
<span id="cb3-16"><a href="#cb3-16"></a>        <span class="st">"https://spreadsheets.google.com/feeds"</span>,</span>
<span id="cb3-17"><a href="#cb3-17"></a>        <span class="st">"https://www.googleapis.com/auth/drive"</span>,</span>
<span id="cb3-18"><a href="#cb3-18"></a>    ]</span>
<span id="cb3-19"><a href="#cb3-19"></a>    credentials <span class="op">=</span> ServiceAccountCredentials.from_json_keyfile_name(</span>
<span id="cb3-20"><a href="#cb3-20"></a>        <span class="st">"credentials.json"</span>, scope</span>
<span id="cb3-21"><a href="#cb3-21"></a>    )</span>
<span id="cb3-22"><a href="#cb3-22"></a>    client <span class="op">=</span> gspread.authorize(credentials)</span>
<span id="cb3-23"><a href="#cb3-23"></a></span>
<span id="cb3-24"><a href="#cb3-24"></a>    worksheet <span class="op">=</span> client.<span class="bu">open</span>(WORKBOOK).get_worksheet(<span class="dv">0</span>)</span>
<span id="cb3-25"><a href="#cb3-25"></a>    sheet_values <span class="op">=</span> worksheet.get_all_values()</span>
<span id="cb3-26"><a href="#cb3-26"></a></span>
<span id="cb3-27"><a href="#cb3-27"></a>    <span class="bu">print</span>(<span class="ss">f"Downloading: </span><span class="sc">{</span>worksheet<span class="sc">.</span>title<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-28"><a href="#cb3-28"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"my_pokemon_stats.csv"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb3-29"><a href="#cb3-29"></a>        writer <span class="op">=</span> csv.writer(f)</span>
<span id="cb3-30"><a href="#cb3-30"></a>        writer.writerows(sheet_values)</span>
<span id="cb3-31"><a href="#cb3-31"></a></span>
<span id="cb3-32"><a href="#cb3-32"></a></span>
<span id="cb3-33"><a href="#cb3-33"></a><span class="kw">def</span> generate_site():</span>
<span id="cb3-34"><a href="#cb3-34"></a>    <span class="co">"""Generate site in local directory"""</span></span>
<span id="cb3-35"><a href="#cb3-35"></a>    <span class="bu">print</span>(<span class="st">"Process data and build site"</span>)</span>
<span id="cb3-36"><a href="#cb3-36"></a></span>
<span id="cb3-37"><a href="#cb3-37"></a>    template_loader <span class="op">=</span> jinja2.FileSystemLoader(searchpath<span class="op">=</span><span class="st">"./"</span>)</span>
<span id="cb3-38"><a href="#cb3-38"></a>    template_env <span class="op">=</span> jinja2.Environment(loader<span class="op">=</span>template_loader)</span>
<span id="cb3-39"><a href="#cb3-39"></a>    template <span class="op">=</span> template_env.get_template(<span class="st">"template.html"</span>)</span>
<span id="cb3-40"><a href="#cb3-40"></a></span>
<span id="cb3-41"><a href="#cb3-41"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"my_pokemon_stats.csv"</span>) <span class="im">as</span> csv_file:</span>
<span id="cb3-42"><a href="#cb3-42"></a>        csv_reader <span class="op">=</span> csv.DictReader(csv_file)</span>
<span id="cb3-43"><a href="#cb3-43"></a>        data <span class="op">=</span> [row <span class="cf">for</span> row <span class="kw">in</span> csv_reader]</span>
<span id="cb3-44"><a href="#cb3-44"></a></span>
<span id="cb3-45"><a href="#cb3-45"></a>    output <span class="op">=</span> template.render(data<span class="op">=</span>data)</span>
<span id="cb3-46"><a href="#cb3-46"></a></span>
<span id="cb3-47"><a href="#cb3-47"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">"index.html"</span>, <span class="st">"w"</span>) <span class="im">as</span> f:</span>
<span id="cb3-48"><a href="#cb3-48"></a>        f.write(output)</span>
<span id="cb3-49"><a href="#cb3-49"></a></span>
<span id="cb3-50"><a href="#cb3-50"></a></span>
<span id="cb3-51"><a href="#cb3-51"></a><span class="kw">def</span> deploy_site():</span>
<span id="cb3-52"><a href="#cb3-52"></a>    <span class="co">"""Deploy site S3 bucket"""</span></span>
<span id="cb3-53"><a href="#cb3-53"></a>    <span class="bu">print</span>(<span class="st">"Upload data to S3"</span>)</span>
<span id="cb3-54"><a href="#cb3-54"></a>    session <span class="op">=</span> boto3.Session(profile_name<span class="op">=</span>AWS_PROFILE)</span>
<span id="cb3-55"><a href="#cb3-55"></a>    s3 <span class="op">=</span> session.resource(<span class="st">"s3"</span>)</span>
<span id="cb3-56"><a href="#cb3-56"></a>    s3.Bucket(BUCKET).upload_file(</span>
<span id="cb3-57"><a href="#cb3-57"></a>        Filename<span class="op">=</span><span class="st">"index.html"</span>, Key<span class="op">=</span><span class="st">"index.html"</span>, ExtraArgs<span class="op">=</span>{<span class="st">"ContentType"</span>: <span class="st">"text/html"</span>}</span>
<span id="cb3-58"><a href="#cb3-58"></a>    )</span>
<span id="cb3-59"><a href="#cb3-59"></a></span>
<span id="cb3-60"><a href="#cb3-60"></a></span>
<span id="cb3-61"><a href="#cb3-61"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb3-62"><a href="#cb3-62"></a>    download_data()</span>
<span id="cb3-63"><a href="#cb3-63"></a>    generate_site()</span>
<span id="cb3-64"><a href="#cb3-64"></a>    deploy_site()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The code is structured in 3 functions: <code>download_sheets</code>, <code>generate_site</code>, and <code>deploy_site</code>. We will fill the details for accessing AWS and the Google Sheets API in the next sections.</p>
</section>
<section id="using-the-google-sheets-api" class="level2">
<h2 class="anchored" data-anchor-id="using-the-google-sheets-api">Using the Google Sheets API</h2>
<p>Follow these steps to download the Pokemon’s data using the Google Sheets API:</p>
<ol type="1">
<li>Create a Workbook in Google Sheets (you can copy mine: <a href="https://docs.google.com/spreadsheets/d/1Q6Gbe1bNoMo12hjtWwEFEaQzxyRKOuYsCfZ9AHLmhy0/edit?usp=sharing">My Pokemon Stats</a>)</li>
<li>Go to the <a href="https://console.developers.google.com/">Google APIs Console</a></li>
<li>Create a new project called <em>MyPokemonStats</em>.</li>
<li>Click on <em>Enable API and Services</em>. Search for and enable the Google Sheets API.</li>
<li>Go back to the <a href="https://console.developers.google.com/">Google APIs Console</a> and click on <em>Enable API and Services again</em>. Now search for and enable the Google Drive API.</li>
<li>Click on <em>Create credentials.</em>For the next 4 questions select:<em>Google Drive API</em>, <em>Web Server (e.g.&nbsp;node.js, Tomcat)</em>, <em>Application data,</em> and <em>No, I’m not using them.</em></li>
<li>Click on <em>What credentials do I need?</em> Select a name for the service account (e.g.&nbsp;get-data) grant it a <em>Project</em> Role of <em>Editor</em>. Select the <em>JSON</em> option for <em>Key type</em></li>
<li>A dialog box will open. Save the JSON file, copy it to the <code>my_pokemon_stats</code> directory, and rename it to <code>credentials.json</code>.</li>
<li>Open the <code>credentials.json</code> file. Find a key called <code>client_email</code>, copy its value (e.g., get-data@iam….). Go back to your Workbook in Google Sheets, click the <em>Share</em> button in the top right, and paste the client email into the <em>People</em> field to give it edit rights. Hit Send.</li>
<li>Go to the <code>site_builder.py</code> script, and set the <code>WORKBOOK</code> variable to whatever name you gave to your workbook on step 1.</li>
</ol>
</section>
<section id="setting-up-an-s3-bucket-and-aws-related-configurations" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-an-s3-bucket-and-aws-related-configurations">Setting up an S3 bucket and AWS-related configurations</h2>
<p>Now, let’s create the S3 bucket and configure our code to access AWS programmatically:</p>
<ol type="1">
<li>Go to the <a href="https://console.aws.amazon.com/s3">Amazon S3 Console</a></li>
<li>Create an S3 bucket</li>
<li>Once in the bucket, click on <em>Properties</em> and then on <em>Static website hosting</em></li>
<li>Select the option <em>Use this bucket to host a website</em></li>
<li>Under <em>Index document</em> and <em>Error document</em> put <code>index.html</code></li>
<li>Save the URL from <em>Endpoint</em>. You’ll use that URL for connecting to your site.</li>
<li>Go to <em>Permissions</em> and click <em>Edit</em></li>
<li>Clear <em>Block all public access</em>, choose <em>Save</em>, and confirm. <strong>When you change this anyone on the internet will have access to the contents of this bucket</strong>. That’s what you want when you are publishing a site, however don’t put anything private there!</li>
<li>Now go to <em>Bucket Policy</em>, replace the bucket name in the policy below, paste it there, and click Save.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="dt">"Version"</span><span class="fu">:</span> <span class="st">"2012-10-17"</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">"Statement"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>    <span class="fu">{</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>      <span class="dt">"Sid"</span><span class="fu">:</span> <span class="st">"PublicReadGetObject"</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>      <span class="dt">"Effect"</span><span class="fu">:</span> <span class="st">"Allow"</span><span class="fu">,</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>      <span class="dt">"Principal"</span><span class="fu">:</span> <span class="st">"*"</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>      <span class="dt">"Action"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"s3:GetObject"</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>      <span class="dt">"Resource"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"arn:aws:s3:::BUCKET-NAME-HERE/*"</span><span class="ot">]</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>    <span class="fu">}</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  <span class="ot">]</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="10" type="1">
<li>Go to the <code>site_builder.py</code> script. Set the variable <code>AWS_PROFILE</code> variable to the profile name you use for accessing AWS (in a UNIX sytem it should be one of the profiles in <code>~/.aws/credentials</code>).</li>
</ol>
</section>
<section id="build-and-deploy-your-site" class="level2">
<h2 class="anchored" data-anchor-id="build-and-deploy-your-site">Build and Deploy Your Site</h2>
<p>Finally, you should be able to run <code>python site_builder.py</code> from the root folder of the project to generate the site. This will download the data from Google Sheets, process the <code>template.html</code> file using Jinja and upload the site to the S3 bucket.</p>
<p>If you want to check the site, go to the endpoint URL (step 6 from the previous section).</p>
</section>
<section id="closing-words" class="level2">
<h2 class="anchored" data-anchor-id="closing-words">Closing Words</h2>
<p>This method is by no means perfect but will help you ship something quickly. I used this strategy to build <a href="https://stayhomeandlearn.org/">stayhomeandlearn.org</a> and it worked quite well. From April 1st until April 16th, the site got over fifteen thousand visitors, which exceeded my most optimistic expectations.</p>
<p><a href="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="images/build-a-site-quickly-using-google-sheets-python-and-aws/image-6.png" class="img-fluid"></a></p>
<p>The site is slowly walking towards its death now. However, <strong>this process taught me how important it is to focus on shipping instead of wasting time looking for the perfect tools</strong>. I built the site quickly, people liked it, and after the first day it already had more traffic than any of the side projects I’ve done so far. That thing about perfect being the enemy of good is real.</p>
<p>In my case, I had to add more functionality to the script for styling and deploying purposes. If you are interested, you can take a look at the code in my GitHub repository: <a href="https://github.com/dylanjcastillo/stayhomeandlearn.org" class="uri">https://github.com/dylanjcastillo/stayhomeandlearn.org</a></p>
<p>[1] G. Bauges, <a href="https://www.twilio.com/blog/2017/02/an-easy-way-to-read-and-write-to-a-google-spreadsheet-in-python.html">Google Spreadsheets and Python</a> (2017)</p>
<p>[2] V. Drake, H<a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/">osting your static site with AWS S3, Route 53, and CloudFront</a> (2017)</p>
<p>[3] A. Barradas, <a href="https://www.kaggle.com/abcsds/pokemon">Pokemon With Stats</a> (2016)</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{castillo2020,
  author = {Castillo, Dylan},
  title = {Use {Google} {Sheets,} {S3,} and {Python} to {Build} a
    {Website} {Quickly}},
  date = {2020-04-16},
  url = {https://dylancastillo.co/posts/build-a-site-quickly-using-google-sheets-python-and-aws.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-castillo2020" class="csl-entry quarto-appendix-citeas" role="listitem">
Castillo, Dylan. 2020. <span>“Use Google Sheets, S3, and Python to Build
a Website Quickly.”</span> April 16, 2020. <a href="https://dylancastillo.co/posts/build-a-site-quickly-using-google-sheets-python-and-aws.html">https://dylancastillo.co/posts/build-a-site-quickly-using-google-sheets-python-and-aws.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dylancastillo\.co");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="dylanjcastillo/blog_comments" issue-term="pathname" theme="dark-blue" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Dylan Castillo</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","openEffect":"zoom","loop":false,"descPosition":"bottom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>