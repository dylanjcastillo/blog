<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dylan Castillo">
<meta name="dcterms.date" content="2020-12-10">
<meta name="description" content="The first step in a Machine Learning project is cleaning the data. In this article, you’ll find 20 code snippets to clean and tokenize text data using Python.">

<title>Clean and Tokenize Text With Python – Dylan Castillo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&amp;display=swap" rel="stylesheet">
<script src="https://cdn.usefathom.com/script.js" data-site="ZJFQREIA" defer=""></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dylanjcastillo"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/dylanjcastillo/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/dylanjcastillo"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-to-use" id="toc-how-to-use" class="nav-link active" data-scroll-target="#how-to-use">How to use</a></li>
  <li><a href="#code-snippets" id="toc-code-snippets" class="nav-link" data-scroll-target="#code-snippets">Code snippets</a>
  <ul>
  <li><a href="#cleaning-text" id="toc-cleaning-text" class="nav-link" data-scroll-target="#cleaning-text">Cleaning text</a>
  <ul class="collapse">
  <li><a href="#lowercase-text" id="toc-lowercase-text" class="nav-link" data-scroll-target="#lowercase-text">Lowercase text</a></li>
  <li><a href="#remove-cases-useful-for-caseless-matching" id="toc-remove-cases-useful-for-caseless-matching" class="nav-link" data-scroll-target="#remove-cases-useful-for-caseless-matching">Remove cases (useful for caseless matching)</a></li>
  <li><a href="#remove-hyperlinks" id="toc-remove-hyperlinks" class="nav-link" data-scroll-target="#remove-hyperlinks">Remove hyperlinks</a></li>
  <li><a href="#remove-a-tags-but-keep-their-content" id="toc-remove-a-tags-but-keep-their-content" class="nav-link" data-scroll-target="#remove-a-tags-but-keep-their-content">Remove <code>&lt;a&gt;</code> tags but keep their content</a></li>
  <li><a href="#remove-all-html-tags-but-keep-their-contents" id="toc-remove-all-html-tags-but-keep-their-contents" class="nav-link" data-scroll-target="#remove-all-html-tags-but-keep-their-contents">Remove all HTML tags but keep their contents</a></li>
  <li><a href="#remove-extra-spaces-tabs-and-line-breaks" id="toc-remove-extra-spaces-tabs-and-line-breaks" class="nav-link" data-scroll-target="#remove-extra-spaces-tabs-and-line-breaks">Remove extra spaces, tabs, and line breaks</a></li>
  <li><a href="#remove-punctuation" id="toc-remove-punctuation" class="nav-link" data-scroll-target="#remove-punctuation">Remove punctuation</a></li>
  <li><a href="#remove-numbers" id="toc-remove-numbers" class="nav-link" data-scroll-target="#remove-numbers">Remove numbers</a></li>
  <li><a href="#remove-digits" id="toc-remove-digits" class="nav-link" data-scroll-target="#remove-digits">Remove digits</a></li>
  <li><a href="#remove-non-alphabetic-characters" id="toc-remove-non-alphabetic-characters" class="nav-link" data-scroll-target="#remove-non-alphabetic-characters">Remove non-alphabetic characters</a></li>
  <li><a href="#remove-all-special-characters-and-punctuation" id="toc-remove-all-special-characters-and-punctuation" class="nav-link" data-scroll-target="#remove-all-special-characters-and-punctuation">Remove all special characters and punctuation</a></li>
  <li><a href="#remove-stopwords-from-a-list" id="toc-remove-stopwords-from-a-list" class="nav-link" data-scroll-target="#remove-stopwords-from-a-list">Remove stopwords from a list</a></li>
  <li><a href="#remove-short-tokens" id="toc-remove-short-tokens" class="nav-link" data-scroll-target="#remove-short-tokens">Remove short tokens</a></li>
  <li><a href="#transform-emojis-into-characters" id="toc-transform-emojis-into-characters" class="nav-link" data-scroll-target="#transform-emojis-into-characters">Transform emojis into characters</a></li>
  <li><a href="#remove-repeated-characters" id="toc-remove-repeated-characters" class="nav-link" data-scroll-target="#remove-repeated-characters">Remove repeated characters</a></li>
  </ul></li>
  <li><a href="#nltk" id="toc-nltk" class="nav-link" data-scroll-target="#nltk">NLTK</a>
  <ul class="collapse">
  <li><a href="#tokenize-text-using-nltk" id="toc-tokenize-text-using-nltk" class="nav-link" data-scroll-target="#tokenize-text-using-nltk">Tokenize text using NLTK</a></li>
  <li><a href="#tokenize-tweets-using-nltk" id="toc-tokenize-tweets-using-nltk" class="nav-link" data-scroll-target="#tokenize-tweets-using-nltk">Tokenize tweets using NLTK</a></li>
  <li><a href="#split-text-into-sentences-using-nltk" id="toc-split-text-into-sentences-using-nltk" class="nav-link" data-scroll-target="#split-text-into-sentences-using-nltk">Split text into sentences using NLTK</a></li>
  </ul></li>
  <li><a href="#remove-stopwords-using-nltk" id="toc-remove-stopwords-using-nltk" class="nav-link" data-scroll-target="#remove-stopwords-using-nltk">Remove stopwords using NLTK</a></li>
  <li><a href="#spacy" id="toc-spacy" class="nav-link" data-scroll-target="#spacy">spaCy</a>
  <ul class="collapse">
  <li><a href="#tokenize-text-using-spacy" id="toc-tokenize-text-using-spacy" class="nav-link" data-scroll-target="#tokenize-text-using-spacy">Tokenize text using spaCy</a></li>
  <li><a href="#split-text-into-sentences-using-spacy" id="toc-split-text-into-sentences-using-spacy" class="nav-link" data-scroll-target="#split-text-into-sentences-using-spacy">Split text into sentences using spaCy</a></li>
  </ul></li>
  <li><a href="#keras" id="toc-keras" class="nav-link" data-scroll-target="#keras">Keras</a>
  <ul class="collapse">
  <li><a href="#tokenize-text-using-keras" id="toc-tokenize-text-using-keras" class="nav-link" data-scroll-target="#tokenize-text-using-keras">Tokenize text using Keras</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Clean and Tokenize Text With Python</h1>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">nlp</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://dylancastillo.co">Dylan Castillo</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://iwanalabs.com">
            Iwana Labs
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 10, 2020</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 10, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<p>Every time I start a new project, I promise to save the most useful code snippets for the future, but I never do.</p>
<p>The old ways are too compelling. I end up copying code from old projects, looking for the same questions in Stack Overflow, or reviewing the same Kaggle notebooks for the hundredth time. At this point, I don’t know how many times I’ve googled for a variant of “remove extra spaces in a string using Python.”</p>
<p>So, finally, I’ve decided to compile snippets and small recipes for frequent tasks. I’m starting with Natural Language Processing (NLP) because I’ve been involved in several projects in that area in the last few years.</p>
<p>For now, I’m planning on compiling code snippets and recipes for the following tasks:</p>
<ul>
<li>Cleaning and tokenizing text (this article)</li>
<li><a href="https://dylancastillo.co/nlp-snippets-cluster-documents-using-word2vec/">Clustering documents</a></li>
<li><a href="https://dylancastillo.co/text-classification-using-python-and-scikit-learn/">Classifying text</a></li>
</ul>
<p>This article contains 20 code snippets you can use to clean and tokenize text using Python. I’ll continue adding new ones whenever I find something useful. They’re based on a mix of &nbsp;Stack Overflow answers, books, and my experience.</p>
<p>In the next section, you can see an example of how to use the code snippets. Then, you can check the snippets on your own and take the ones you need.</p>
<section id="how-to-use" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use">How to use</h2>
<p>I’d recommend you combine the snippets you need into a function. Then, you can use that function for pre-processing or tokenizing text. If you’re using <strong>pandas</strong>, you can apply that function to a specific column using the <code>.map</code> method of pandas’ <code>Series</code>.</p>
<p>Take a look at the example below:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> re</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">from</span> string <span class="im">import</span> punctuation</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a>df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb1-7"><a href="#cb1-7"></a>    <span class="st">"text_col"</span>: [</span>
<span id="cb1-8"><a href="#cb1-8"></a>        <span class="st">"This TEXT needs </span><span class="ch">\t\t\t</span><span class="st">some cleaning!!!..."</span>,</span>
<span id="cb1-9"><a href="#cb1-9"></a>        <span class="st">"This text too!!...       "</span>,</span>
<span id="cb1-10"><a href="#cb1-10"></a>        <span class="st">"Yes, you got it right!</span><span class="ch">\n</span><span class="st"> This one too</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>    ]</span>
<span id="cb1-12"><a href="#cb1-12"></a>})</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="kw">def</span> preprocess_text(text):</span>
<span id="cb1-15"><a href="#cb1-15"></a>    text <span class="op">=</span> text.lower()  <span class="co"># Lowercase text</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>    text <span class="op">=</span> re.sub(<span class="ss">f"[</span><span class="sc">{</span>re<span class="sc">.</span>escape(punctuation)<span class="sc">}</span><span class="ss">]"</span>, <span class="st">""</span>, text)  <span class="co"># Remove punctuation</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>    text <span class="op">=</span> <span class="st">" "</span>.join(text.split())  <span class="co"># Remove extra spaces, tabs, and new lines</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>    <span class="cf">return</span> text</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a>df[<span class="st">"text_col"</span>].<span class="bu">map</span>(preprocess_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="code-snippets" class="level2">
<h2 class="anchored" data-anchor-id="code-snippets">Code snippets</h2>
<p>Before testing the snippets, copy the following function at the top of your Python script or Jupyter notebook.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">def</span> print_text(sample, clean):</span>
<span id="cb2-2"><a href="#cb2-2"></a>    <span class="bu">print</span>(<span class="ss">f"Before: </span><span class="sc">{</span>sample<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="bu">print</span>(<span class="ss">f"After: </span><span class="sc">{</span>clean<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="cleaning-text" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-text">Cleaning text</h3>
<p>These are functions you can use to clean text using Python. Most of them just use Python’s standard libraries like <code>re</code> or <code>string</code>.</p>
<section id="lowercase-text" class="level4">
<h4 class="anchored" data-anchor-id="lowercase-text">Lowercase text</h4>
<p>It’s fairly common to <a href="https://nlp.stanford.edu/IR-book/html/htmledition/capitalizationcase-folding-1.html">lowercase text for NLP tasks</a>. Luckily, Python strings include a <code>.lower()</code> method that makes that easy for you. Here’s how you use it:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>sample_text <span class="op">=</span> <span class="st">"THIS TEXT WILL BE LOWERCASED. THIS WON'T: ßßß"</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>clean_text <span class="op">=</span> sample_text.lower()</span>
<span id="cb3-3"><a href="#cb3-3"></a>print_text(sample_text, clean_text)</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co"># Before: THIS TEXT WILL BE LOWERCASED. THIS WON'T: ßßß</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># After: this text will be lowercased. this won't: ßßß</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-cases-useful-for-caseless-matching" class="level4">
<h4 class="anchored" data-anchor-id="remove-cases-useful-for-caseless-matching">Remove cases (useful for caseless matching)</h4>
<p>Case folding is a common approach for matching strings (especially in languages other than English). Python strings provide you with <code>.casefold()</code> for that. Here’s how to use it:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>sample_text <span class="op">=</span> <span class="st">"THIS TEXT WILL BE LOWERCASED. THIS too: ßßß"</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>clean_text <span class="op">=</span> sample_text.casefold()</span>
<span id="cb4-3"><a href="#cb4-3"></a>print_text(sample_text, clean_text)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co"># Before: THIS TEXT WILL BE LOWERCASED. THIS too: ßßß</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co"># After: this text will be lowercased. this too: ssssss</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-hyperlinks" class="level4">
<h4 class="anchored" data-anchor-id="remove-hyperlinks">Remove hyperlinks</h4>
<p>If you’re web scrapping, you’ll often deal with hyperlinks. It’s possible that you’d like to remove those to analyze the text. The easiest way to do that is by using regular expressions.</p>
<p>Python’s <code>re</code> library is handy for those cases. This is how you’d remove hyperlinks using it:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="im">import</span> re</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a>sample_text <span class="op">=</span> <span class="st">"Some URLs: https://example.com http://example.io http://exam-ple.com More text"</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"https?://\S+"</span>, <span class="st">""</span>, sample_text)</span>
<span id="cb5-5"><a href="#cb5-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co"># Before: Some URLs: https://example.com http://example.io http://exam-ple.com More text</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co"># After: Some URLs:    More text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-a-tags-but-keep-their-content" class="level4">
<h4 class="anchored" data-anchor-id="remove-a-tags-but-keep-their-content">Remove <code>&lt;a&gt;</code> tags but keep their content</h4>
<p>Similar to the previous case, if you’re doing web scrapping, you might often find dealing with tags. In some cases, such as <code>&lt;a&gt;</code>, you may want to remove the tag and its attributes but not its contents (e.g., the text it contains).</p>
<p>You can use Python’s <code>re</code> for that. Here’s how you’d remove the <code>&lt;a&gt;</code> tag and its attributes while keeping its content:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="im">import</span> re</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>sample_text <span class="op">=</span> <span class="st">"Here's &lt;a href='https://example.com'&gt; a tag&lt;/a&gt;"</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"&lt;a[^&gt;]*&gt;(.*?)&lt;/a&gt;"</span>, <span class="vs">r"\1"</span>, sample_text)</span>
<span id="cb6-5"><a href="#cb6-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co"># Before: Here's &lt;a href='https://example.com'&gt; a tag&lt;/a&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co"># After: Here's  a tag</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also use this snippet as a starting point to remove other types of tags.</p>
</section>
<section id="remove-all-html-tags-but-keep-their-contents" class="level4">
<h4 class="anchored" data-anchor-id="remove-all-html-tags-but-keep-their-contents">Remove all HTML tags but keep their contents</h4>
<p>If you’re dealing with web pages and want to remove all the tags in a document, you can use a generalized version of the previous snippet. Here’s how you remove all the HTML tags using Python’s <code>re</code> library:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="im">import</span> re</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>sample_text <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">&lt;body&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">&lt;div&gt; This is a sample text with &lt;b&gt;lots of tags&lt;/b&gt; &lt;/div&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">&lt;br/&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">&lt;/body&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="st">"""</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"&lt;.*?&gt;"</span>, <span class="st">" "</span>, sample_text)</span>
<span id="cb7-10"><a href="#cb7-10"></a>print_text(sample_text, clean_text)</span>
<span id="cb7-11"><a href="#cb7-11"></a></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co"># Before:</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co"># &lt;body&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co"># &lt;div&gt; This is a sample text with &lt;b&gt;lots of tags&lt;/b&gt; &lt;/div&gt;</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co"># &lt;br/&gt;</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co"># &lt;/body&gt;</span></span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co"># After:</span></span>
<span id="cb7-20"><a href="#cb7-20"></a></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#  This is a sample text with lots of tags</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-extra-spaces-tabs-and-line-breaks" class="level4">
<h4 class="anchored" data-anchor-id="remove-extra-spaces-tabs-and-line-breaks">Remove extra spaces, tabs, and line breaks</h4>
<p>You might think that the best approach to remove extra spaces, tabs, and line breaks would depend on regular expressions. But it doesn’t.</p>
<p>The best approach consists of using a clever combination two string methods: <code>.split()</code> and <code>.join()</code>. First, you apply the <code>.split()</code> method to the string you want to clean. It will split the string by any whitespace and output a list. Then, you apply the <code>.join()</code> method on a string with a single whitespace (” “), using as input the list you generated. This will put back together the string you split but use a single whitespace as separator.</p>
<p>Yes, I know it sounds a bit confusing. But, in reality, it’s fairly simple. Here’s how it looks in code:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>sample_text <span class="op">=</span> <span class="st">"     </span><span class="ch">\t\t</span><span class="st">A      text</span><span class="ch">\t\t\t\n\n</span><span class="st"> sample       "</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join(sample_text.split())</span>
<span id="cb8-3"><a href="#cb8-3"></a>print_text(sample_text, clean_text)</span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># Before:           A      text</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#  sample</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co"># After: A text sample</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-punctuation" class="level4">
<h4 class="anchored" data-anchor-id="remove-punctuation">Remove punctuation</h4>
<p>Many NLP applications won’t work very well if you include punctuation. So it’s common to remove them. The easiest approach consists in using the <code>string</code> and <code>re</code> standard libraries are as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="im">import</span> re</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="im">from</span> string <span class="im">import</span> punctuation</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>sample_text <span class="op">=</span> <span class="st">"A lot of !!!! .... ,,,, ;;;;;;;?????"</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>clean_text <span class="op">=</span> re.sub(<span class="ss">f"[</span><span class="sc">{</span>re<span class="sc">.</span>escape(punctuation)<span class="sc">}</span><span class="ss">]"</span>, <span class="st">""</span>, sample_text)</span>
<span id="cb9-6"><a href="#cb9-6"></a>print_text(sample_text, clean_text)</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co"># Before: A lot of !!!! .... ,,,, ;;;;;;;?????</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co"># After: A lot of</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-numbers" class="level4">
<h4 class="anchored" data-anchor-id="remove-numbers">Remove numbers</h4>
<p>In some cases, you might want to remove numbers from text, when you don’t feel they’re very informative. You can use a regular expression for that:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="im">import</span> re</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>sample_text <span class="op">=</span> <span class="st">"Remove these numbers: 1919191 2229292 11.233 22/22/22. But don't remove this one H2O"</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"\b[0-9]+\b\s*"</span>, <span class="st">""</span>, sample_text)</span>
<span id="cb10-5"><a href="#cb10-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># Before: Remove these numbers: 1919191 2229292 11.233 22/22/22. But don't remove this one H2O</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co"># After: Remove these numbers: .//. But don't remove this one H2O</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-digits" class="level4">
<h4 class="anchored" data-anchor-id="remove-digits">Remove digits</h4>
<p>There are cases where you might want to remove digits instead of any number. For instance, when you want to remove numbers but not dates. Using a regular expression gets a bit trickier.</p>
<p>In those cases, you can use the <code>.isdigit()</code> method of strings:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>sample_text <span class="op">=</span> <span class="st">"I want to keep this one: 10/10/20 but not this one 222333"</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join([w <span class="cf">for</span> w <span class="kw">in</span> sample_text.split() <span class="cf">if</span> <span class="kw">not</span> w.isdigit()]) <span class="co"># Side effect: removes extra spaces</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>print_text(sample_text, clean_text)</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># Before: I want to keep this one: 10/10/20 but not this one 222333</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co"># After: I want to keep this one: 10/10/20 but not this one</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-non-alphabetic-characters" class="level4">
<h4 class="anchored" data-anchor-id="remove-non-alphabetic-characters">Remove non-alphabetic characters</h4>
<p>Sometimes, you’d like to remove non-alphabetic characters like numbers or punctuation. The <code>.isalpha()</code> method of Python strings will come in handy in those cases.</p>
<p>Here’s how you use it:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>sample_text <span class="op">=</span> <span class="st">"Sample text with numbers 123455 and words !!!"</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join([w <span class="cf">for</span> w <span class="kw">in</span> sample_text.split() <span class="cf">if</span> w.isalpha()]) <span class="co"># Side effect: removes extra spaces</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>print_text(sample_text, clean_text)</span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co"># Before: Sample text with numbers 123455 and words !!!</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># After: Sample text with numbers and words</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-all-special-characters-and-punctuation" class="level4">
<h4 class="anchored" data-anchor-id="remove-all-special-characters-and-punctuation">Remove all special characters and punctuation</h4>
<p>In cases where you want to remove all characters except letters and numbers, you can use a regular expression.</p>
<p>Here’s a quick way to do it:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="im">import</span> re</span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a>sample_text <span class="op">=</span> <span class="st">"Sample text 123 !!!! Haha.... !!!! ##$$$</span><span class="sc">%%%%</span><span class="st">"</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r"[^A-Za-z0-9\s]+"</span>, <span class="st">""</span>, sample_text)</span>
<span id="cb13-5"><a href="#cb13-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co"># Before: Sample text 123 !!!! Haha.... !!!! ##$$$%%%%</span></span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co"># After: Sample text 123  Haha</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-stopwords-from-a-list" class="level4">
<h4 class="anchored" data-anchor-id="remove-stopwords-from-a-list">Remove stopwords from a list</h4>
<p>There’s the case where you’d like to exclude words using a predefined list. A quick way to do it is by using <strong>list comprehensions</strong>. Here’s one way to do it:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>stopwords <span class="op">=</span> [<span class="st">"is"</span>, <span class="st">"a"</span>]</span>
<span id="cb14-2"><a href="#cb14-2"></a>sample_text <span class="op">=</span> <span class="st">"this is a sample text"</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>tokens <span class="op">=</span> sample_text.split()</span>
<span id="cb14-4"><a href="#cb14-4"></a>clean_tokens <span class="op">=</span> [t <span class="cf">for</span> t <span class="kw">in</span> tokens <span class="cf">if</span> <span class="kw">not</span> t <span class="kw">in</span> stopwords]</span>
<span id="cb14-5"><a href="#cb14-5"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join(clean_tokens)</span>
<span id="cb14-6"><a href="#cb14-6"></a>print_text(sample_text, clean_text)</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co"># Before: this is a sample text</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co"># After: this sample text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-short-tokens" class="level4">
<h4 class="anchored" data-anchor-id="remove-short-tokens">Remove short tokens</h4>
<p>In some cases, you may want to remove tokens with few characters. In this case, using <strong>list comprehensions</strong> will make it easy:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>sample_text <span class="op">=</span> <span class="st">"this is a sample text. I'll remove the a"</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>tokens <span class="op">=</span> sample_text.split()</span>
<span id="cb15-3"><a href="#cb15-3"></a>clean_tokens <span class="op">=</span> [t <span class="cf">for</span> t <span class="kw">in</span> tokens <span class="cf">if</span> <span class="bu">len</span>(t) <span class="op">&gt;</span> <span class="dv">1</span>]</span>
<span id="cb15-4"><a href="#cb15-4"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join(clean_tokens)</span>
<span id="cb15-5"><a href="#cb15-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb15-6"><a href="#cb15-6"></a></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># Before: this is a sample text. I'll remove the a</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co"># After: this is sample text. I'll remove the</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="transform-emojis-into-characters" class="level4">
<h4 class="anchored" data-anchor-id="transform-emojis-into-characters">Transform emojis into characters</h4>
<p>If you’re processing social media data, there might be cases where you’d like to extract the meaning of emojis instead of simply removing them. An easy way to do that is by using the <a href="https://pypi.org/project/emoji/">emoji</a> library.</p>
<p>Here’s how you do it:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="im">from</span> emoji <span class="im">import</span> demojize</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a>sample_text <span class="op">=</span> <span class="st">"I love 🥑"</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>clean_text <span class="op">=</span> demojize(sample_text)</span>
<span id="cb16-5"><a href="#cb16-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co"># Before: I love 🥑</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co"># After: I love :avocado:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="remove-repeated-characters" class="level4">
<h4 class="anchored" data-anchor-id="remove-repeated-characters">Remove repeated characters</h4>
<p>In some cases, you may want to remove repeated characters, so instead of “helloooo” you use “hello”. Here’s how you can do it (I got this code snippet from <a href="https://www.amazon.com/Data-Analysis-Machine-Learning-Kaggle-ebook/dp/B09F3STL34">The Kaggle Book</a>):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="im">import</span> re</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>sample_text <span class="op">=</span> <span class="st">"hellooooo"</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>clean_text <span class="op">=</span> re.sub(<span class="vs">r'(.)\1{3,}'</span>,<span class="vs">r'\1'</span>, sample_text)</span>
<span id="cb17-5"><a href="#cb17-5"></a>print_text(sample_text, clean_text)</span>
<span id="cb17-6"><a href="#cb17-6"></a></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co"># Before: hellooooo</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co"># After: hello</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="nltk" class="level3">
<h3 class="anchored" data-anchor-id="nltk">NLTK</h3>
<p>Before using NLTK’s snippets, you need to install NLTK. You can do that as follows: <code>pip install nltk</code>.</p>
<section id="tokenize-text-using-nltk" class="level4">
<h4 class="anchored" data-anchor-id="tokenize-text-using-nltk">Tokenize text using NLTK</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> word_tokenize</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a>sample_text <span class="op">=</span> <span class="st">"this is a text ready to tokenize"</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>tokens <span class="op">=</span> word_tokenize(sample_text)</span>
<span id="cb18-5"><a href="#cb18-5"></a>print_text(sample_text, tokens)</span>
<span id="cb18-6"><a href="#cb18-6"></a></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co"># Before: this is a text ready to tokenize</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co"># After: ['this', 'is', 'a', 'text', 'ready', 'to', 'tokenize']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="tokenize-tweets-using-nltk" class="level4">
<h4 class="anchored" data-anchor-id="tokenize-tweets-using-nltk">Tokenize tweets using NLTK</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> TweetTokenizer</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>tweet_tokenizer <span class="op">=</span> TweetTokenizer()</span>
<span id="cb19-4"><a href="#cb19-4"></a>sample_text <span class="op">=</span> <span class="st">"This is a tweet @jack #NLP"</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>tokens <span class="op">=</span> tweet_tokenizer.tokenize(sample_text)</span>
<span id="cb19-6"><a href="#cb19-6"></a>print_text(sample_text, tokens)</span>
<span id="cb19-7"><a href="#cb19-7"></a></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co"># Before: This is a tweet @jack #NLP</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co"># After: ['This', 'is', 'a', 'tweet', '@jack', '#NLP']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="split-text-into-sentences-using-nltk" class="level4">
<h4 class="anchored" data-anchor-id="split-text-into-sentences-using-nltk">Split text into sentences using NLTK</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> sent_tokenize</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a>sample_text <span class="op">=</span> <span class="st">"This is a sentence. This is another one!</span><span class="ch">\n</span><span class="st">And this is the last one."</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>sentences <span class="op">=</span> sent_tokenize(sample_text)</span>
<span id="cb20-5"><a href="#cb20-5"></a>print_text(sample_text, sentences)</span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co"># Before: This is a sentence. This is another one!</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co"># And this is the last one.</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="co"># After: ['This is a sentence.', 'This is another one!', 'And this is the last one.']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="remove-stopwords-using-nltk" class="level3">
<h3 class="anchored" data-anchor-id="remove-stopwords-using-nltk">Remove stopwords using NLTK</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="im">import</span> nltk</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a>nltk.download(<span class="st">"stopwords"</span>)</span>
<span id="cb21-6"><a href="#cb21-6"></a></span>
<span id="cb21-7"><a href="#cb21-7"></a>stopwords_ <span class="op">=</span> <span class="bu">set</span>(stopwords.words(<span class="st">"english"</span>))</span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a>sample_text <span class="op">=</span> <span class="st">"this is a sample text"</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>tokens <span class="op">=</span> sample_text.split()</span>
<span id="cb21-11"><a href="#cb21-11"></a>clean_tokens <span class="op">=</span> [t <span class="cf">for</span> t <span class="kw">in</span> tokens <span class="cf">if</span> <span class="kw">not</span> t <span class="kw">in</span> stopwords_]</span>
<span id="cb21-12"><a href="#cb21-12"></a>clean_text <span class="op">=</span> <span class="st">" "</span>.join(clean_tokens)</span>
<span id="cb21-13"><a href="#cb21-13"></a>print_text(sample_text, clean_text)</span>
<span id="cb21-14"><a href="#cb21-14"></a></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="co"># Before: this is a sample text</span></span>
<span id="cb21-17"><a href="#cb21-17"></a><span class="co"># After: sample text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="spacy" class="level3">
<h3 class="anchored" data-anchor-id="spacy">spaCy</h3>
<p>Before using spaCy’s snippets, you need to install the library as follows: <code>pip install spacy</code>. You also need to download a language model. For English, here’s how you do it: <code>python -m spacy download en_core_web_sm</code>.</p>
<section id="tokenize-text-using-spacy" class="level4">
<h4 class="anchored" data-anchor-id="tokenize-text-using-spacy">Tokenize text using spaCy</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="im">import</span> spacy</span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a>nlp <span class="op">=</span> spacy.load(<span class="st">"en_core_web_sm"</span>)</span>
<span id="cb22-4"><a href="#cb22-4"></a></span>
<span id="cb22-5"><a href="#cb22-5"></a>sample_text <span class="op">=</span> <span class="st">"this is a text ready to tokenize"</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>doc <span class="op">=</span> nlp(sample_text)</span>
<span id="cb22-7"><a href="#cb22-7"></a>tokens <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> doc]</span>
<span id="cb22-8"><a href="#cb22-8"></a>print_text(sample_text, tokens)</span>
<span id="cb22-9"><a href="#cb22-9"></a></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co"># Before: this is a text ready to tokenize</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co"># After: ['this', 'is', 'a', 'text', 'ready', 'to', 'tokenize']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="split-text-into-sentences-using-spacy" class="level4">
<h4 class="anchored" data-anchor-id="split-text-into-sentences-using-spacy">Split text into sentences using spaCy</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="im">import</span> spacy</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>nlp <span class="op">=</span> spacy.load(<span class="st">"en_core_web_sm"</span>)</span>
<span id="cb23-4"><a href="#cb23-4"></a></span>
<span id="cb23-5"><a href="#cb23-5"></a>sample_text <span class="op">=</span> <span class="st">"This is a sentence. This is another one!</span><span class="ch">\n</span><span class="st">And this is the last one."</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>doc <span class="op">=</span> nlp(sample_text)</span>
<span id="cb23-7"><a href="#cb23-7"></a>sentences <span class="op">=</span> [sentence.text <span class="cf">for</span> sentence <span class="kw">in</span> doc.sents]</span>
<span id="cb23-8"><a href="#cb23-8"></a>print_text(sample_text, sentences)</span>
<span id="cb23-9"><a href="#cb23-9"></a></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co"># Before: This is a sentence. This is another one!</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co"># And this is the last one.</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co"># After: ['This is a sentence.', 'This is another one!\n', 'And this is the last one.']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="keras" class="level3">
<h3 class="anchored" data-anchor-id="keras">Keras</h3>
<p>Before using Keras’ snippets, you need to install the library as follows: <code>pip install tensorflow &amp;&amp; pip install keras</code>.</p>
<section id="tokenize-text-using-keras" class="level4">
<h4 class="anchored" data-anchor-id="tokenize-text-using-keras">Tokenize text using Keras</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="im">from</span> keras.preprocessing.text <span class="im">import</span> text_to_word_sequence</span>
<span id="cb24-2"><a href="#cb24-2"></a></span>
<span id="cb24-3"><a href="#cb24-3"></a>sample_text <span class="op">=</span> <span class="st">'This is a text you want to tokenize using KERAS!!'</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>tokens <span class="op">=</span> text_to_word_sequence(sample_text)</span>
<span id="cb24-5"><a href="#cb24-5"></a>print_text(sample_text, tokens)</span>
<span id="cb24-6"><a href="#cb24-6"></a></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co"># ----- Expected output -----</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co"># Before: This is a text you want to tokenize using KERAS!!</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co"># After: ['this', 'is', 'a', 'text', 'you', 'want', 'to', 'tokenize', 'using', 'keras']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{castillo2020,
  author = {Castillo, Dylan},
  title = {Clean and {Tokenize} {Text} {With} {Python}},
  date = {2020-12-10},
  url = {https://dylancastillo.co/posts/nlp-snippets-clean-and-tokenize-text-with-python.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-castillo2020" class="csl-entry quarto-appendix-citeas" role="listitem">
Castillo, Dylan. 2020. <span>“Clean and Tokenize Text With
Python.”</span> December 10, 2020. <a href="https://dylancastillo.co/posts/nlp-snippets-clean-and-tokenize-text-with-python.html">https://dylancastillo.co/posts/nlp-snippets-clean-and-tokenize-text-with-python.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dylancastillo\.co");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="dylanjcastillo/blog_comments" issue-term="pathname" theme="dark-blue" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Dylan Castillo</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>